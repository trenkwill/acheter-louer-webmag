!function(){var a=jQuery.event,b=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;for(e=0;e<b.length;e++)for(f=b[e],h=f.indexOf(".")<0,h||(k=f.split("."),f=k.shift(),l=new RegExp("(^|\\.)"+k.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")),g=(a[f]||[]).slice(0),i=0;i<g.length;i++)j=g[i],m=h||l.test(j.namespace),m&&(d?j.selector===d&&c(f,j.origHandler||j.handler):null===d?c(f,j.origHandler||j.handler,j.selector):j.selector||c(f,j.origHandler||j.handler))};a.find=function(a,c,d){var e=($._data(a)||{}).events,f=[];return e?(b(e,c,function(a,b){f.push(b)},d),f):f},a.findBySelector=function(a,c){var d=$._data(a).events,e={},f=function(a,b,c){var d=e[a]||(e[a]={}),f=d[b]||(d[b]=[]);f.push(c)};return d?(b(d,c,function(a,b,c){f(c||"",a,b)},null),e):e},a.supportTouch="ontouchend"in document,$.fn.respondsTo=function(b){return this.length?a.find(this[0],$.isArray(b)?b:[b]).length>0:!1},$.fn.triggerHandled=function(a,b){return a="string"==typeof a?$.Event(a):a,this.trigger(a,b),a.handled},a.setupHelper=function(b,c,d){d||(d=c,c=null);var e=function(e){var f,g=e.selector||"";g?(f=a.find(this,b,g),f.length||$(this).delegate(g,c,d)):a.find(this,b,g).length||a.add(this,c,d,{selector:g,delegate:this})},f=function(e){var f,g=e.selector||"";g?(f=a.find(this,b,g),f.length||$(this).undelegate(g,c,d)):a.find(this,b,g).length||a.remove(this,c,d,{selector:g,delegate:this})};$.each(b,function(){a.special[this]={add:e,remove:f,setup:function(){},teardown:function(){}}})}}(jQuery),function(a){var b=/Phantom/.test(navigator.userAgent),c=!b&&"ontouchend"in document,d=c?"touchstart":"mousedown",e=c?"touchend":"mouseup",f=c?"touchmove":"mousemove",g=function(b){var c=b.originalEvent.touches?b.originalEvent.touches[0]:b;return{time:(new Date).getTime(),coords:[c.pageX,c.pageY],origin:a(b.target)}},h=a.event.swipe={delay:500,max:75,min:30};a.event.setupHelper(["swipe","swipeleft","swiperight","swipeup","swipedown"],d,function(b){function c(a){i&&(d=g(a),Math.abs(i.coords[0]-d.coords[0])>10&&a.preventDefault())}var d,i=g(b),j=b.delegateTarget||b.currentTarget,k=b.handleObj.selector,l=this;a(document.documentElement).bind(f,c).one(e,function(){if(a(this).unbind(f,c),i&&d){var e=Math.abs(i.coords[0]-d.coords[0]),g=Math.abs(i.coords[1]-d.coords[1]),m=Math.sqrt(e*e+g*g);if(d.time-i.time<h.delay&&m>=h.min){var n=["swipe"];e>=h.min&&g<h.min?n.push(i.coords[0]>d.coords[0]?"swipeleft":"swiperight"):g>=h.min&&e<h.min&&n.push(i.coords[1]<d.coords[1]?"swipedown":"swipeup"),a.each(a.event.find(j,n,k),function(){this.call(l,b,{start:i,end:d})})}}i=d=void 0})})}(jQuery),function(a,b,c){"use strict";var d,e,f=a.event;d=f.special.debouncedresize={setup:function(){a(this).on("resize",d.handler)},teardown:function(){a(this).off("resize",d.handler)},handler:function(a,b){var c=this,g=arguments,h=function(){a.type="debouncedresize",f.dispatch.apply(c,g)};e&&clearTimeout(e),b?h():e=setTimeout(h,d.threshold)},threshold:150};var g=a(b),h=b.Modernizr;a.BookBlock=function(b,c){this.$el=a(c),this._init(b)},a.BookBlock.defaults={speed:1e3,easing:"ease-in-out",shadows:!0,shadowSides:.2,shadowFlip:.1,perspective:1300,circular:!1,nextEl:"",prevEl:"",autoplay:!1,interval:3e3,keyboard:!0,onEndFlip:function(){return!1},onBeforeFlip:function(){return!1}},a.BookBlock.prototype={_init:function(b){this.options=a.extend(!0,{},a.BookBlock.defaults,b),this.$el.css("perspective",this.options.perspective),this.$items=this.$el.children(".bb-item"),this.itemsCount=this.$items.length,this.current=0,this.previous=-1,this.$current=this.$items.eq(this.current).show(),this.elWidth=this.$el.width();var c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.transEndEventName=c[h.prefixed("transition")]+".bookblock",this.support=h.csstransitions&&h.csstransforms3d,this._initEvents(),this.options.autoplay&&(this.options.circular=!0,this._startSlideshow())},_initEvents:function(){var b=this;""!==this.options.nextEl&&a(this.options.nextEl).on("click.bookblock",function(){return b._action("next"),!1}),""!==this.options.prevEl&&a(this.options.prevEl).on("click.bookblock",function(){return b._action("prev"),!1}),1==this.options.keyboard&&a(document).keydown(function(a){var c=a.keyCode||a.which,d={left:37,up:38,right:39,down:40};switch(c){case d.left:b._action("prev");break;case d.right:b._action("next")}}),g.on("debouncedresize",function(){b.elWidth=b.$el.width()})},_action:function(a,b){this._stopSlideshow(),this._navigate(a,b)},_navigate:function(a,b){return this.isAnimating?!1:(this.options.onBeforeFlip(this.current),this.isAnimating=!0,this.$current=this.$items.eq(this.current),b!==c?this.current=b:"next"===a?this.options.circular||this.current!==this.itemsCount-1?(this.previous=this.current,this.current=this.current<this.itemsCount-1?this.current+1:0):this.end=!0:"prev"===a&&(this.options.circular||0!==this.current?(this.previous=this.current,this.current=this.current>0?this.current-1:this.itemsCount-1):this.end=!0),this.$nextItem=!this.options.circular&&this.end?this.$current:this.$items.eq(this.current),void(this.support?this._layout(a):this._layoutNoSupport(a)))},_layoutNoSupport:function(a){this.$items.hide(),this.$nextItem.show(),this.end=!1,this.isAnimating=!1;var b="next"===a&&this.current===this.itemsCount-1||"prev"===a&&0===this.current;this.options.onEndFlip(this.previous,this.current,b)},_layout:function(a){var b=this,c=this._addSide("left",a),d=this._addSide("middle",a),e=this._addSide("right",a),f=c.find("div.bb-overlay"),g=d.find("div.bb-flipoverlay:first"),h=d.find("div.bb-flipoverlay:last"),i=e.find("div.bb-overlay"),j=this.end?400:this.options.speed;if(this.$items.hide(),this.$el.prepend(c,d,e),d.css({transition:"all "+j+"ms "+this.options.easing}).on(this.transEndEventName,function(c){if("bb-page"===c.target.className){b.$el.children("div.bb-page").remove(),b.$nextItem.show(),b.end=!1,b.isAnimating=!1;var d="next"===a&&b.current===b.itemsCount-1||"prev"===a&&0===b.current;b.options.onEndFlip(b.previous,b.current,d)}}),"prev"===a&&d.css({transform:"rotateY(-180deg)"}),this.options.shadows&&!this.end){var k="next"===a?{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms"}:{transition:"opacity "+this.options.speed/2+"ms linear",opacity:this.options.shadowSides},l="next"===a?{transition:"opacity "+this.options.speed/2+"ms linear"}:{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms",opacity:this.options.shadowFlip},m="next"===a?{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms",opacity:this.options.shadowFlip}:{transition:"opacity "+this.options.speed/2+"ms linear"},n="next"===a?{transition:"opacity "+this.options.speed/2+"ms linear",opacity:this.options.shadowSides}:{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms"};g.css(l),h.css(m),f.css(k),i.css(n)}setTimeout(function(){var c="next"===a?"rotateY(-180deg)":"rotateY(0deg)";b.end&&(c="next"===a?"rotateY(-15deg)":"rotateY(-165deg)"),d.css({transform:c}),b.options.shadows&&!b.end&&(g.css({opacity:"next"===a?b.options.shadowFlip:0}),h.css({opacity:"next"===a?0:b.options.shadowFlip}),f.css({opacity:"next"===a?b.options.shadowSides:0}),i.css({opacity:"next"===a?0:b.options.shadowSides}))},30)},_addSide:function(b,c){var d;switch(b){case"left":d=a('<div class="bb-page"><div class="bb-back"><div class="bb-outer"><div class="bb-content" style="width:'+this.elWidth+'px"><div class="bb-inner">'+("next"===c?this.$current.html():this.$nextItem.html())+'</div></div><div class="bb-overlay"></div></div></div></div>').css("z-index",102);break;case"middle":d=a('<div class="bb-page"><div class="bb-front"><div class="bb-outer"><div class="bb-content" style="left:'+-this.elWidth/2+"px;width:"+this.elWidth+'px"><div class="bb-inner">'+("next"===c?this.$current.html():this.$nextItem.html())+'</div></div><div class="bb-flipoverlay"></div></div></div><div class="bb-back"><div class="bb-outer"><div class="bb-content" style="width:'+this.elWidth+'px"><div class="bb-inner">'+("next"===c?this.$nextItem.html():this.$current.html())+'</div></div><div class="bb-flipoverlay"></div></div></div></div>').css("z-index",103);break;case"right":d=a('<div class="bb-page"><div class="bb-front"><div class="bb-outer"><div class="bb-content" style="left:'+-this.elWidth/2+"px;width:"+this.elWidth+'px"><div class="bb-inner">'+("next"===c?this.$nextItem.html():this.$current.html())+'</div></div><div class="bb-overlay"></div></div></div></div>').css("z-index",101)}return d},_startSlideshow:function(){var a=this;this.slideshow=setTimeout(function(){a._navigate("next"),a.options.autoplay&&a._startSlideshow()},this.options.interval)},_stopSlideshow:function(){this.options.autoplay&&(clearTimeout(this.slideshow),this.options.autoplay=!1)},next:function(){this._action("next")},prev:function(){this._action("prev")},jump:function(a){return a-=1,a===this.current||a>=this.itemsCount||0>a?!1:void this._action(a>this.current?"next":"prev",a)},isActive:function(){return this.isAnimating},update:function(){var a=this.$items.eq(this.current);this.$items=this.$el.children(".bb-item"),this.itemsCount=this.$items.length,this.current=a.index()}};var i=function(a){b.console&&b.console.error(a)};a.fn.bookblock=function(b){var c=a.data(this,"bookblock");if("string"==typeof b){var d=Array.prototype.slice.call(arguments,1);this.each(function(){return c?a.isFunction(c[b])&&"_"!==b.charAt(0)?void c[b].apply(c,d):void i("no such method '"+b+"' for bookblock instance"):void i("cannot call methods on bookblock prior to initialization; attempted to call method '"+b+"'")})}else this.each(function(){c?c._init():c=a.data(this,"bookblock",new a.BookBlock(b,this))});return c}}(jQuery,window);